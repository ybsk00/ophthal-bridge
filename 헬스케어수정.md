# AR 시야 체감 시뮬레이터: “교정 전/후” 비교 UX 적용 계획(최종)

## 0) 목표
시뮬레이터에 **교정 전/후 비교**를 추가하여 체감도를 즉시 높이고,
“설정 저장(로그인)” 트리거를 강화한다.

- 교정 전 = 원본(필터 미적용) / 기본 화면
- 교정 후 = 프리셋/슬라이더 설정 적용 결과
- “교정”의 의미를 UI에서 **설정(필터) 교정**으로 고정하여 오해를 방지한다.

---

## 1) 문구 정책(최종)
### 1.1 버튼/라벨
- 토글 버튼: `교정 전후 보기`
- 상태 라벨:
  - Before: `교정 전(기본)`
  - After: `교정 후(설정)`

### 1.2 고정 안내 문구(하단, 작은 글씨)
- “본 기능은 참고용 체감 비교이며, 실제 상태·결과를 예측하거나 보장하지 않습니다.”
- “이미지는 저장하지 않으며, 저장되는 값은 설정값입니다.” (로그인 저장 CTA 근처)

---

## 2) 인터랙션 설계 (PC/모바일 공통)
### 2.1 기본 토글
- 버튼 클릭 시 `교정 전(기본) ↔ 교정 후(설정)` 전환
- 기본값: `교정 후(설정)` (변화 체감이 즉시 보이도록)

### 2.2 누르고 비교(강력 추천)
- 버튼을 누르고 있는 동안: `교정 전(기본)`
- 버튼에서 손을 떼면: `교정 후(설정)`
- 구현: Pointer Events 기반
  - onPointerDown → before
  - onPointerUp / onPointerCancel / onPointerLeave → after

---

## 3) 렌더링 동작 규칙
### 3.1 Sample 모드(기본)
- 교정 전: 샘플 이미지를 Canvas에 그대로 draw
- 교정 후: 현재 필터 파이프라인 적용 후 draw
- 성능:
  - 교정 후는 프리셋/슬라이더 변경 시에만 drawOnce
  - 토글은 가능하면 캐시된 렌더 결과를 즉시 교체

### 3.2 Live 모드(카메라 선택)
- 교정 전: video 프레임 원본 draw
- 교정 후: 동일 프레임에 필터 적용 draw
- Live는 requestAnimationFrame 루프(권장: 30fps 제한)
- 토글은 동일 루프에서 분기(viewMode) 처리

---

## 4) 상태/타입 추가
- viewMode: "before" | "after"
- 기본값: viewMode = "after"

---

## 5) 컴포넌트 변경점
### 5.1 VisionSimulator.tsx
- [NEW] `교정 전후 보기` 버튼 + 라벨(교정 전/후) UI 추가
- [NEW] press-to-compare 핸들러(pointer down/up) 추가
- [MODIFY] draw 함수에 viewMode 분기 추가

### 5.2 UI 배치(권장)
- 샘플 탭 아래, 프리셋 버튼 위에 전/후 토글 배치
- 라벨은 버튼 내부 또는 버튼 우측에 작은 텍스트로 노출:
  - “현재: 교정 후(설정)” 등

---

## 6) 이벤트(분석/KPI)
- before_after_toggle { viewMode: "before" | "after" }
- before_after_hold { duration_ms }
- 기존 이벤트 유지:
  - preset_change, slider_change, mode_switch, cta_click 등

---

## 7) 표현 가이드(중요)
- 사용 단어: 교정 전/후 (단, 반드시 괄호로 의미 고정)
  - 교정 전(기본) / 교정 후(설정)
- 금지: 치료 전후(사용하지 않음)
- 권장: “설정 저장”, “체감 비교”, “참고용 예시”

---

## 8) Verification Plan
1) Sample 모드에서 교정 전/후 토글 시 즉시 화면이 바뀌는지 확인
2) press-to-compare가 모바일/PC에서 정상 동작하는지 확인
3) 슬라이더 변경 시 교정 후(설정)에서만 변화하는지 확인
4) Live 모드에서 교정 전/후 토글이 끊김 없이 동작하는지 확인
5) 안내 문구(예측/보장 아님, 이미지 미저장) 노출 확인
